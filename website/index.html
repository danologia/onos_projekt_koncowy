<html>
<head>
    <style type="text/css">
        #container {
            max-width: 100vw;
            height: 100vh;
            margin: auto;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWR | Sieć wspólpracy</title>


    <script src="https://unpkg.com/react@latest/umd/react.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react-dom@latest/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@material-ui/core@latest/umd/material-ui.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/babel-standalone@latest/babel.min.js" crossorigin="anonymous"></script>
    <!-- Fonts to support Material Design -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    <!-- Icons to support Material Design -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
</head>

<body>
    <div id="container"></div>
    <script src="js/sigma.min.js"></script>
    <script src="js/plugins/sigma.parsers.json.min.js"></script>
    <script>
        sigma.classes.graph.addMethod('neighbors', function (nodeId) {
            var k,
                neighbors = {},
                index = this.allNeighborsIndex[nodeId] || {};

            for (k in index)
                neighbors[k] = this.nodesIndex[k];

            return neighbors;
        });

        sigma.parsers.json('data/graph.json', {
            container: 'container',
            settings: {
                defaultNodeColor: '#ec5148',
                zoomMin: 0.001,
                labelSize: 'proportional',
                defaultNodeBorderColor: "#000",
                borderSize: 1,
                labelSizeRatio: 0.8,
                defaultLabelSize: 5,
                webglOversamplingRatio: 1,
                minEdgeSize: 0.1,
                maxEdgeSize: 2,
                minNodeSize: 0.2,
                maxNodeSize: 8,
                labelThreshold: 13
            }
        },
            function (s) {
                // We first need to save the original colors of our
                // nodes and edges, like this:
                s.graph.nodes().forEach(function (n) {
                    n.originalColor = n.color;
                });
                s.graph.edges().forEach(function (e) {
                    e.originalColor = e.color;
                });

                // When a node is clicked, we check for each node
                // if it is a neighbor of the clicked one. If not,
                // we set its color as grey, and else, it takes its
                // original color.
                // We do the same for the edges, and we only keep
                // edges that have both extremities colored.
                s.bind('clickNode', function (e) {
                    var nodeId = e.data.node.id,
                        toKeep = s.graph.neighbors(nodeId);
                    toKeep[nodeId] = e.data.node;

                    s.graph.nodes().forEach(function (n) {
                        if (toKeep[n.id])
                            n.color = n.originalColor;
                        else
                            n.color = '#eee';
                    });

                    s.graph.edges().forEach(function (e) {
                        if (toKeep[e.source] && toKeep[e.target])
                            e.color = e.originalColor;
                        else
                            e.color = '#eee';
                    });

                    // Since the data has been modified, we need to
                    // call the refresh method to make the colors
                    // update effective.
                    s.refresh();
                });

                // When the stage is clicked, we just color each
                // node and edge with its original color.
                s.bind('rightClick', function (e) {
                    s.graph.nodes().forEach(function (n) {
                        n.color = n.originalColor;
                    });

                    s.graph.edges().forEach(function (e) {
                        e.color = e.originalColor;
                    });

                    // Same as in the previous event:
                    s.refresh();
                });
            }
        );
    </script>
</body>

</html>